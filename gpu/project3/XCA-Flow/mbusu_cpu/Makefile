###############################################################################
# COMMON 																																			#
###############################################################################

include ../common.mk

###############################################################################
# COMPILERS                                                                   #
###############################################################################

# definisce la macro CPPC
ifndef CPPC
	CPPC=g++
endif

###############################################################################
# BUILD                                                                       #
###############################################################################

SRC = mbusu_dhpccpp.cpp
BIN = mbusu_dhpccpp.o
EXE = mbusu_dhpccpp

default:$(EXE)

$(EXE): $(BIN)
	$(CPPC) $^ -o $@ -O3 -fopenmp

$(BIN): $(SRC)
	$(CPPC) $^ -c -O3 -fopenmp

###############################################################################
# EXECUTION                                                                   #
###############################################################################

run:
	./$(EXE) $(ROWS) $(COLS) $(SLICES) $(INPUT_KS_PATH) $(SIMULATION_TIME) $(OUTPUT_PREFIX)

###############################################################################
# CLEAN                                                                       #
###############################################################################

clean:
	rm -f *.o $(OUTPUT_PREFIX)* $(EXE)

wipe:
	rm -f *.o $(OUTPUT_PREFIX)*
